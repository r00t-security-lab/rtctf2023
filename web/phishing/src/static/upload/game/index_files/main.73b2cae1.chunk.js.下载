(this["webpackJsonpguiding-star-frontend"]=this["webpackJsonpguiding-star-frontend"]||[]).push([[0],{158:function(e,t,n){},184:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"h",(function(){return _}));var c=n(0),r=n(23),s=n(145),a=n(274),i=n(42),l=n(167),o=n(159),j=n.n(o),u=n(275),b=n(31),d=n(1);function O(e){var t=e.text,n=e.width;return Object(d.jsx)("span",{className:"capped-text",style:{maxWidth:n+"px"},children:t})}function h(e){for(var t="qwertyuiopasdfghjkzxcvbnmQWERTYUPASDFGHJKLZXCVBNM23456789",n="",c=0;c<e;c++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function m(e){s.b.loading({content:"\u6b63\u5728\u524d\u5f80\u767b\u5f55\u9875\u9762\u2026",key:"Utils.ToAuth",duration:15}),setTimeout((function(){window.location.href=b.b+e}),100)}function x(e){return e<10?"0"+e:""+e}function f(e){var t=new Date(1e3*e);return"".concat(x(t.getMonth()+1),"-").concat(x(t.getDate()))+" ".concat(x(t.getHours()),":").concat(x(t.getMinutes()),":").concat(x(t.getSeconds()))}var p=j()({prefixAgo:null,prefixFromNow:"",suffixAgo:function(e,t){return t<59500?"\u521a\u521a":"\u524d"},suffixFromNow:function(e,t){return-t<59500?"1\u5206\u949f\u4e4b\u5185":"\u540e"},seconds:"\u200b",minute:"1\u5206\u949f",minutes:"%d\u5206\u949f",hour:"1\u5c0f\u65f6",hours:"%d\u5c0f\u65f6",day:"1\u5929",days:"%d\u5929",month:"1\u4e2a\u6708",months:"%d\u6708",year:"1\u5e74",years:"%d\u5e74",wordSeparator:""});function g(e){var t=e.ts,n=e.delta,c=void 0===n?0:n;return Object(d.jsx)(l.a,{date:1e3*(t+c),formatter:p,title:f(t)})}function v(){var e=Object(r.f)(),t=Object(r.g)();return Object(d.jsx)(a.a,{icon:Object(d.jsx)(u.a,{}),status:"error",title:"\u9875\u9762\u4e0d\u5b58\u5728",subTitle:Object(d.jsx)(O,{text:e.pathname,width:300}),extra:[Object(d.jsx)(i.a,{onClick:function(){return t("/")},children:"\u8fd4\u56de\u4e3b\u9875"},"home")]})}function y(e){var t=e.href,n=e.children;return Object(d.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:n})}function _(e){var t=Object(c.useRef)(0),n=Object(c.useRef)(null);return Object(c.useEffect)((function(){t.current=+new Date}),[]),[t.current/1e3,function(){n.current&&(n.current.disabled=!0),t.current=+new Date,setTimeout((function(){+new Date-t.current>=1e3*e-200&&n.current&&(n.current.disabled=!1)}),1e3*e)},n]}},252:function(e,t,n){},253:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(39),a=n.n(s),i=n(14),l=n(283),o=n(68),j=n(5),u=n(69),b=n(42),d=n(274),O=n(286),h=n(287),m=n(45),x=n(31),f=n(22),p="wish.2022.v1",g=Object(f.f)(4);function v(e,t){return new Promise((function(n){fetch(x.i+e+(e.includes("?")?"&":"?")+"tabid="+g,{method:"POST",credentials:"include",headers:{"X-Wish-Version":p,"Content-Type":"application/json"},body:t?JSON.stringify(t):"{}"}).then((function(e){return 200!==e.status?{error:"HTTP_ERROR",error_msg:"HTTP \u9519\u8bef ".concat(e.status)}:e.json()})).then((function(e){n(e)})).catch((function(e){n({error:"HTTP_REQ_FAILED",error_msg:"\u7f51\u7edc\u9519\u8bef ".concat(e)})}))}))}function y(e,t){var n=Object(c.useState)(null),r=Object(j.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(null),l=Object(j.a)(i,2),o=l[0],u=l[1],b=Object(c.useCallback)((function(){u(null),a(null),v(e,t).then((function(e){e.error?a(e):(a(null),u(e))}))}),[e,t]);return Object(c.useEffect)((function(){b()}),[b]),[s,o,b]}window._TABID=g;var _=n(1);function N(e){var t=e.set_info,n=y("game_info"),r=Object(j.a)(n,3),s=r[0],a=r[1],i=r[2];Object(c.useEffect)((function(){t(a)}),[t,a]);var l=Object(_.jsx)(b.a,{type:"primary",onClick:i,children:"\u91cd\u8bd5"},"refresh");return Object(_.jsx)("div",{className:"result-page-container",children:s?"HTTP_REQ_FAILED"===s.error?Object(_.jsx)(d.a,{icon:Object(_.jsx)(O.a,{}),status:"error",title:"\u7f51\u7edc\u9519\u8bef",subTitle:s.error_msg,extra:[l]}):"WISH_VERSION_MISMATCH"===s.error?Object(_.jsx)(d.a,{icon:Object(_.jsx)(h.a,{}),status:"error",title:"API \u7248\u672c\u66f4\u65b0",subTitle:s.error_msg,extra:[Object(_.jsx)(b.a,{type:"primary",onClick:function(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;console.log("unregister",c),c.unregister()}}catch(r){n.e(r)}finally{n.f()}})),setTimeout((function(){window.location.reload(!0)}),150)},children:"\u5237\u65b0\u9875\u9762\uff08\u53ef\u80fd\u9700\u8981\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\uff09"},"refresh")]}):Object(_.jsx)(d.a,{status:"error",title:"\u9519\u8bef",subTitle:s.error_msg,extra:[l]}):Object(_.jsx)(d.a,{icon:Object(_.jsx)(m.a,{}),subTitle:"\u83b7\u53d6\u6bd4\u8d5b\u4fe1\u606f"})})}function w(e){var t=e.message,n=e.reload;return Object(_.jsx)(l.a,{type:"error",showIcon:!0,message:t,action:Object(_.jsx)(b.a,{onClick:n,children:"\u91cd\u8bd5"})})}var k=n(2),I=n(12),C=n(13),T=(n(170),n(145)),S=n(288),E=n(289);n(290),n(92),n(184);var F=Object(c.createContext)({info:{user:{id:null,group_disp:"",token:"",profile:{nickname:"",gender:"",tel:"",email:"",qq:"",comment:""},terms_agreed:!1},feature:{game:!1,push:!1,templates:[]}},reload_info:function(){}});function R(e){var t=e.children,n=Object(c.useState)(null),r=Object(j.a)(n,2),s=r[0],a=r[1];return Object(_.jsx)(F.Provider,{value:{info:s,reload_info:function(){a(null)}},children:null===s?Object(_.jsx)(N,{set_info:a}):t})}function A(){return Object(c.useContext)(F).info}var P=n(23),L=n(80),W=n(310),z=n(324),D=n(325),H=n(278);function M(){return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)("h1",{children:"\u5f00\u6e90\u8bb8\u53ef\u8bc1"}),Object(_.jsxs)(H.a,{children:[Object(_.jsx)("p",{children:Object(_.jsx)("b",{children:"\u5173\u4e8e\u672c\u5e73\u53f0\u7684\u4f7f\u7528\u8bb8\u53ef\uff1a"})}),Object(_.jsxs)("p",{children:["Guiding Star \u662f\u4e3a\u4e86 PKU GeekGame \u800c\u5f00\u53d1\u7684 CTF \u6bd4\u8d5b\u5e73\u53f0\uff0c",Object(_.jsx)(f.b,{href:"https://github.com/PKU-GeekGame/guiding-star",children:"\u5728 GitHub \u5f00\u653e\u6e90\u4ee3\u7801"}),"\u3002"]}),Object(_.jsx)("p",{children:"\u5141\u8bb8\u4efb\u4f55\u4eba\u5728 MIT \u534f\u8bae\uff08\u5982\u4e0b\uff09\u7684\u8981\u6c42\u4e0b\u90e8\u7f72\u6216\u4e8c\u6b21\u5f00\u53d1\u672c\u5e73\u53f0\u3002"}),Object(_.jsx)("p",{children:"Copyright (c) 2022 @xmcp, and other members from PKUGGG Team"}),Object(_.jsx)("p",{children:'Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:'}),Object(_.jsx)("p",{children:"The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software."}),Object(_.jsx)("p",{children:'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'}),Object(_.jsxs)("p",{children:["\u5e73\u53f0\u524d\u7aef\u90e8\u5206\u4f7f\u7528\u4e86\u6309\u7167 MIT \u534f\u8bae\u5f00\u6e90\u7684"," ",Object(_.jsx)(f.b,{href:"https://github.com/facebook/react/blob/main/LICENSE",children:"React"}),"\u3001",Object(_.jsx)(f.b,{href:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",children:"React-Router"}),"\u3001",Object(_.jsx)(f.b,{href:"https://github.com/nmn/react-timeago/blob/master/LICENSE",children:"React-TimeAgo"}),"\u3001",Object(_.jsx)(f.b,{href:"https://github.com/ant-design/ant-design/blob/master/LICENSE",children:"Ant-Design"}),"\u3001",Object(_.jsx)(f.b,{href:"https://github.com/ant-design/ant-design-charts/blob/master/LICENSE",children:"Ant-Design-Charts"})," \u548c"," ",Object(_.jsx)(f.b,{href:"https://github.com/sudodoki/copy-to-clipboard/blob/master/LICENSE",children:"copy-to-clipboard"})," ","\u7b49\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u3002"]}),Object(_.jsx)("p",{children:"\u5e73\u53f0\u540e\u7aef\u90e8\u5206\u4f7f\u7528\u7684\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u5217\u8868\u53c2\u89c1\u540e\u7aef\u4ee3\u7801\u3002"})]}),Object(_.jsx)("br",{}),Object(_.jsxs)(H.a,{children:[Object(_.jsx)("p",{children:Object(_.jsx)("b",{children:"\u5173\u4e8e\u6bd4\u8d5b\u5185\u5bb9\u7684\u4f7f\u7528\u8bb8\u53ef\uff1a"})}),x.c]})]})}var B=n(276),G=n(59),U=n(284),q=n(281),V=n(298),Z=n(299),K=n(300);function Y(e){var t=e.children;return Object(_.jsx)(U.a,{color:"blue",children:t})}var J=n(291),Q=n(292),$=n(293),X=n(294);n(252);function ee(e){var t=e.status;return"untouched"===t?Object(_.jsx)(J.a,{className:"challenge-icon-untouched"}):"partial"===t?Object(_.jsx)(Q.a,{className:"challenge-icon-partial",twoToneColor:"#1e63bd"}):"passed"===t?Object(_.jsx)($.a,{className:"challenge-icon-passed",twoToneColor:"#1ab500"}):"??"}function te(e){var t=e.status;return"untouched"===t?Object(_.jsx)(X.a,{className:"flag-icon-passed",twoToneColor:"#a7a7a7"}):"passed"===t?Object(_.jsx)(X.a,{className:"flag-icon-passed",twoToneColor:"#1ab500"}):"??"}n(253);var ne=n(295),ce=n(296),re=n(297);function se(e){var t=e.badges;if(0===t.length)return null;var n,c=[],r=Object(u.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;"girl"===s?c.push(Object(_.jsx)(G.a,{title:"\u5177\u6709\u5973\u751f\u7279\u522b\u5956\u8d44\u683c",children:Object(_.jsx)(ne.a,{twoToneColor:"#eb2f96"})},s)):"rookie"===s?c.push(Object(_.jsx)(G.a,{title:"\u5177\u6709\u65b0\u751f\u7279\u522b\u5956\u8d44\u683c",children:Object(_.jsx)(ce.a,{})},s)):s.startsWith("remark:")?c.push(Object(_.jsx)(G.a,{title:s.substring(7),children:Object(_.jsx)(re.a,{twoToneColor:"#ff6600"})},s)):c.push(Object(_.jsxs)("span",{children:["[",s,"]"]},s))}}catch(a){r.e(a)}finally{r.f()}return Object(_.jsx)("span",{className:"user-badges",children:c})}var ae=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,551))}));function ie(e){var t=e.ch,n=e.record;return Object(_.jsxs)("div",{children:[Object(_.jsxs)("p",{children:[Object(_.jsx)("b",{children:t.title})," (",t.category,")"]}),t.flags.map((function(e,c){var r=n.flag_status["".concat(t.key,"_").concat(c)]||null;return Object(_.jsxs)("p",{children:[Object(_.jsx)(te,{status:null===r?"untouched":"passed"})," ",e,"\uff1a",null===r?"\u5c1a\u672a\u901a\u8fc7":"(+".concat(r.gained_score,") ").concat(Object(f.e)(r.timestamp_s))]},c)}))]})}function le(){return Object(_.jsx)("div",{className:"topstar-plot-loading",children:Object(_.jsxs)("p",{children:[Object(_.jsx)(m.a,{})," \u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6"]})})}function oe(e){var t=e.name,n=t.indexOf(" #");if(n<=0)return Object(_.jsx)("span",{className:"name-base-part",children:t});var c=t.substring(0,n),r=t.substring(n);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"name-base-part",children:c}),Object(_.jsx)("span",{className:"name-tag-part",children:r})]})}function je(e){var t=e.data;return Object(_.jsxs)("div",{children:[Object(_.jsx)(l.a.ErrorBoundary,{children:Object(_.jsx)(c.Suspense,{fallback:Object(_.jsx)(le,{}),children:Object(_.jsx)(ae,{data:t})})}),Object(_.jsx)("br",{}),Object(_.jsxs)(B.a,{size:"small",dataSource:t.list,pagination:!1,rowKey:"rank",scroll:{x:"max-content"},children:[Object(_.jsx)(B.a.Column,{title:"#",dataIndex:"rank"}),Object(_.jsx)(B.a.Column,{title:"\u6635\u79f0",render:function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(oe,{name:t.nickname}),null===t.group_disp?null:Object(_.jsxs)(_.Fragment,{children:["\xa0\xa0",Object(_.jsx)(Y,{children:t.group_disp})]}),Object(_.jsx)(se,{badges:t.badges})]})}},"name"),Object(_.jsx)(B.a.Column,{title:"\u603b\u5206",dataIndex:"score",render:function(e){return Object(_.jsx)("b",{children:e})}}),Object(_.jsx)(B.a.Column,{title:"\u6700\u540e\u63d0\u4ea4\u65f6\u95f4",dataIndex:"last_succ_submission_ts",render:function(e){return Object(f.e)(e)}}),Object(_.jsx)(B.a.Column,{title:"\u7b54\u9898\u8fdb\u5ea6",render:function(e,n){return t.challenges.map((function(e){return Object(_.jsx)(G.a,{trigger:"hover",destroyTooltipOnHide:!0,title:Object(_.jsx)(ie,{ch:e,record:n}),placement:"topRight",align:{offset:[10,8]},mouseEnterDelay:0,mouseLeaveDelay:0,overlayClassName:"board-challenge-status-tooltip",autoAdjustOverflow:!1,children:Object(_.jsx)("div",{className:"board-challenge-status-icon",children:Object(_.jsx)(ee,{status:n.challenge_status[e.key]})})},e.key)}))}},"challenges")]})]})}function ue(e){var t=e.data.list.flatMap((function(e){return e.flags.map((function(t,n){return Object(k.a)(Object(k.a)({},t),{},{challenge_title:e.title,challenge_metadata:e.metadata,flags_count:e.flags.length,flag_idx0:n,key:"".concat(e.key,"_").concat(n)})}))}));return Object(_.jsxs)(B.a,{size:"small",dataSource:t,pagination:!1,rowKey:"key",scroll:{x:"max-content"},children:[Object(_.jsx)(B.a.Column,{title:"\u9898\u76ee",dataIndex:"challenge_title",render:function(e){return Object(_.jsx)("b",{children:e})},onCell:function(e){return{rowSpan:0===e.flag_idx0?e.flags_count:0}}}),Object(_.jsx)(B.a.Column,{title:"Flag",dataIndex:"flag_name",render:function(e,t){return Object(_.jsxs)(_.Fragment,{children:[null===e?t.flags_count>1?"\u89e3\u51fa\u6240\u6709 Flag":"\u89e3\u51fa Flag":e,!(null!==e||!t.challenge_metadata.first_blood_award_eligible)&&Object(_.jsxs)(G.a,{title:"\u9996\u4e2a\u5b8c\u5168\u89e3\u51fa\u7684\u6821\u5185\u9009\u624b\u53ef\u83b7\u5f97\u6b64\u9898\u7684\u89e3\u9898\u5148\u950b\u5956",children:[" ",Object(_.jsxs)(U.a,{color:"#a00",children:[Object(_.jsx)(V.a,{twoToneColor:"red"})," \u89e3\u9898\u5148\u950b\u5956"]})]})]})}}),Object(_.jsx)(B.a.Column,{title:"\u4e00\u8840\u83b7\u5f97\u8005",render:function(e,t){return null!==t.nickname&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(oe,{name:t.nickname}),null===t.group_disp?null:Object(_.jsxs)(_.Fragment,{children:["\xa0\xa0",Object(_.jsx)(Y,{children:t.group_disp})]}),Object(_.jsx)(se,{badges:t.badges})]})}},"user"),Object(_.jsx)(B.a.Column,{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"timestamp",render:function(e){return null===e?null:Object(f.e)(e)}})]})}function be(e){var t=e.data;return"score"===t.type?Object(_.jsx)(je,{data:t}):"firstblood"===t.type?Object(_.jsx)(ue,{data:t}):Object(_.jsx)(l.a,{type:"error",message:"\u672a\u77e5\u6392\u884c\u699c\u7c7b\u578b ".concat(t.type),showIcon:!0})}function de(e){var t=y("board/"+e.name),n=Object(j.a)(t,3),c=n[0],r=n[1],s=n[2],a=Object(f.h)(3),i=Object(j.a)(a,3),o=i[0],u=i[1],d=i[2];return c?Object(_.jsx)(w,{message:c.error_msg,reload:function(){u(),s()}}):Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"board-reloader",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)(Z.a,{})," ",0!==o&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(f.d,{ts:o}),"\u66f4\u65b0\uff08",Object(f.e)(o),"\uff09"]})]}),Object(_.jsx)("div",{children:Object(_.jsxs)(b.a,{type:"link",ref:d,onClick:function(){T.b.success({content:"\u5df2\u5237\u65b0\u6392\u884c\u699c",key:"Board.ManualLoadData",duration:2}),u(),s()},children:[Object(_.jsx)(K.a,{})," \u5237\u65b0\u6392\u884c\u699c"]})})]}),null===r?Object(_.jsx)(q.a,{}):Object(_.jsxs)("div",{children:[!!r.desc&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{type:"info",message:r.desc,showIcon:!0}),Object(_.jsx)("br",{})]}),Object(_.jsx)(be,{data:r})]})]})}function Oe(){var e=y("submissions"),t=Object(j.a)(e,3),n=t[0],c=t[1],r=t[2];return n?Object(_.jsx)(w,{message:n.error_msg,reload:r}):null===c?Object(_.jsx)(q.a,{}):Object(_.jsxs)(B.a,{size:"small",dataSource:c.list,rowKey:"idx",scroll:{x:"max-content"},children:[Object(_.jsx)(B.a.Column,{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"timestamp_s",render:function(e){return Object(f.e)(e)}}),Object(_.jsx)(B.a.Column,{title:"\u9898\u76ee",dataIndex:"challenge_title"}),Object(_.jsx)(B.a.Column,{title:"Flag",dataIndex:"matched_flag",render:function(e){return null===e?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(te,{status:"untouched"})," \u672a\u5339\u914d"]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(te,{status:"passed"})," \u6210\u529f\u5339\u914d ",e]})}}),Object(_.jsx)(B.a.Column,{title:"\u5907\u6ce8",dataIndex:"overrides",render:function(e){return e.map((function(e,t){return Object(_.jsx)(U.a,{color:"red",children:e},t)}))}}),Object(_.jsx)(B.a.Column,{title:"\u83b7\u5f97\u5206\u6570",dataIndex:"gained_score"})]})}function he(){return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)("h1",{children:"\u63d0\u4ea4\u5386\u53f2\u8bb0\u5f55"}),Object(_.jsx)(Oe,{})]})}var me=n(279),xe=n(277),fe=n(130),pe=n(301),ge=n(302),ve=n(303);n(259);function ye(){var e=y("writeup"),t=Object(j.a)(e,3),n=t[0],r=t[1],s=t[2],a=Object(c.useState)(!1),i=Object(j.a)(a,2),o=i[0],u=i[1],d=Object(c.useState)(null),O=Object(j.a)(d,2),h=O[0],m=O[1],g=Object(c.useState)("Maybe"),v=Object(j.a)(g,2),N=v[0],k=v[1],I=Object(c.useState)("CC-BY-NC"),C=Object(j.a)(I,2),S=C[0],E=C[1];if(n)return Object(_.jsx)(w,{message:n.error_msg,reload:s});if(null===r)return Object(_.jsx)(q.a,{});return Object(_.jsxs)("div",{children:[r.writeup_required?Object(_.jsx)(l.a,{showIcon:!0,type:"info",message:Object(_.jsxs)(_.Fragment,{children:["\u6309\u7167\u6bd4\u8d5b\u89c4\u5219\uff0c\u4f60 ",Object(_.jsx)("b",{children:"\u9700\u8981"})," \u5728\u622a\u6b62\u65f6\u95f4\u524d\u63d0\u4ea4 Writeup"]})}):Object(_.jsx)(l.a,{showIcon:!0,type:"info",message:Object(_.jsxs)(_.Fragment,{children:["\u6309\u7167\u6bd4\u8d5b\u89c4\u5219\uff0c\u4f60 ",Object(_.jsx)("b",{children:"\u4e0d\u9700\u8981"})," \u63d0\u4ea4 Writeup\uff0c\u4f46\u5728\u622a\u6b62\u65f6\u95f4\u524d\u53ef\u4ee5\u81ea\u613f\u63d0\u4ea4"]})}),Object(_.jsx)("br",{}),r.submitted_metadata?Object(_.jsx)(l.a,{showIcon:!0,type:"success",message:"\u5df2\u7ecf\u63d0\u4ea4\u4e86 Writeup",description:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("ul",{children:Object.keys(r.submitted_metadata).map((function(e){return Object(_.jsxs)("li",{children:[e,": ",r.submitted_metadata[e]]},e)}))}),Object(_.jsx)("p",{children:"\u5728\u622a\u6b62\u65f6\u95f4\u524d\uff0c\u4f60\u53ef\u4ee5\u63d0\u4ea4\u65b0\u7684 Writeup \u6765\u8986\u76d6\u4e0a\u8ff0\u5185\u5bb9"})]})}):Object(_.jsx)(l.a,{showIcon:!0,type:"info",message:"\u5c1a\u672a\u63d0\u4ea4 Writeup"}),Object(_.jsx)("br",{}),x.j,Object(_.jsx)("br",{}),Object(_.jsx)(H.a,{title:"\u63d0\u4ea4\u65b0\u7684 Writeup",size:"small",type:"inner",bordered:!1,children:Object(_.jsxs)(me.a,{onFinish:function(){if(h){var e=new FormData;e.append("file",h),e.append("publish",N),e.append("rights",S),u(!0);var t=new XMLHttpRequest;t.open("PUT",x.i+"writeup"),t.setRequestHeader("X-Wish-Version",p),t.withCredentials=!0,t.responseType="json",t.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=(100*e.loaded/e.total).toFixed(1);T.b.loading({content:"\u6b63\u5728\u4e0a\u4f20\u2026\uff08".concat(t,"%\uff09"),key:"Writeup.Submit",duration:20})}})),t.addEventListener("loadend",(function(){4!==t.readyState?T.b.error({content:"\u7f51\u7edc\u9519\u8bef state=".concat(t.readyState),key:"Writeup.Submit",duration:3}):200!==t.status?T.b.error({content:"HTTP \u9519\u8bef ".concat(t.status),key:"Writeup.Submit",duration:3}):t.response.error?T.b.error({content:t.response.error_msg,key:"Writeup.Submit",duration:3}):(T.b.success({content:"\u63d0\u4ea4\u6210\u529f",key:"Writeup.Submit",duration:2}),m(null),s()),u(!1)})),t.send(e)}else T.b.error({content:"\u8bf7\u4e0a\u4f20 Writeup \u6587\u4ef6",key:"Writeup.Submit",duration:3})},colon:!1,labelCol:{span:4},labelWrap:!0,wrapperCol:{span:20},children:[Object(_.jsx)(me.a.Item,{label:"\u4e0a\u4f20\u6587\u4ef6",children:Object(_.jsxs)(xe.a.Dragger,{fileList:[],beforeUpload:function(e){return e.size/1024/1024<r.max_size_mb?m(e):T.b.error({content:"\u6587\u4ef6\u8fc7\u5927\uff0c\u8bf7\u5220\u9664\u4e0d\u5fc5\u8981\u7684\u5185\u5bb9\u6216\u8005\u538b\u7f29\u56fe\u7247",key:"Writeup.File",duration:3}),!1},disabled:o,children:[Object(_.jsx)("p",{className:"ant-upload-drag-icon",children:h?Object(_.jsx)(pe.a,{}):Object(_.jsx)(ge.a,{})}),Object(_.jsx)("p",{className:"ant-upload-text",children:h?h.name:"\u9009\u62e9\u6587\u4ef6\u6216\u8005\u62d6\u62fd\u5230\u6b64\u5904"}),Object(_.jsx)("p",{className:"ant-upload-hint",children:h?Object(_.jsxs)(_.Fragment,{children:[(h.size/1024/1024).toFixed(2),"MB"]}):Object(_.jsxs)(_.Fragment,{children:["\u6587\u4ef6\u683c\u5f0f\uff1a\u5efa\u8bae\u4f7f\u7528 .md, .pdf, .pptx, .7z, .zip \u4e4b\u4e00",Object(_.jsx)("br",{}),"\u6587\u4ef6\u5927\u5c0f\uff1a\u4e0a\u9650 ",r.max_size_mb,"MB\uff0c\u4f46\u4e00\u4e2a\u6b63\u5e38\u7684 Writeup \u5e94\u5f53 ",Object(_.jsx)("b",{children:"\u8fdc\u5c0f\u4e8e"})," \u6b64\u5927\u5c0f"]})})]})}),Object(_.jsx)(me.a.Item,{label:"\u662f\u5426\u516c\u5f00",help:"Always-Yes"===N?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("b",{children:"\u6b64 Writeup \u7684\u5185\u5bb9\u5c06\u5728\u8d5b\u540e\u516c\u5f00"}),"\uff0c\u7528\u4e8e\u5b66\u4e60\u4ea4\u6d41"]}):"Maybe"===N?Object(_.jsxs)(_.Fragment,{children:["\u8d5b\u540e\u5c06\u516c\u5f00\u4e00\u4e9b\u9ad8\u8d28\u91cf\u6216\u8005\u542b\u6709\u7279\u6b8a\u89e3\u6cd5\u7684\u9009\u624b Writeup \u7528\u4e8e\u5b66\u4e60\u4ea4\u6d41\uff0c",Object(_.jsx)("b",{children:"\u4f60\u5c06\u5141\u8bb8\u6211\u4eec\u914c\u60c5\u516c\u5f00\u6216\u8005\u4e0d\u516c\u5f00\u6b64 Writeup \u7684\u5185\u5bb9"})]}):"Always-No"===N?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("b",{children:"\u6b64 Writeup \u7684\u5185\u5bb9\u5c06\u4e0d\u4f1a\u88ab\u516c\u5f00\u7ed9\u5176\u4ed6\u9009\u624b"}),"\uff0c\u4f46\u547d\u9898\u4eba\u4f9d\u7136\u4f1a\u51fa\u4e8e\u53cd\u4f5c\u5f0a\u76ee\u7684\u68c0\u67e5\u6b64 Writeup"]}):Object(_.jsxs)(_.Fragment,{children:["(",N,")"]}),children:Object(_.jsxs)(fe.a.Group,{buttonStyle:"solid",value:N,onChange:function(e){return k(e.target.value)},disabled:o,children:[Object(_.jsx)(fe.a.Button,{value:"Always-Yes",children:"\u59cb\u7ec8\u516c\u5f00"}),Object(_.jsx)(fe.a.Button,{value:"Maybe",children:"\u53ef\u4ee5\u516c\u5f00\uff08\u9ed8\u8ba4\uff09"}),Object(_.jsx)(fe.a.Button,{value:"Always-No",children:"\u4e0d\u516c\u5f00"})]})}),Object(_.jsx)(me.a.Item,{label:"\u6743\u5229",help:"All-Rights-Reserved"===S?Object(_.jsxs)(_.Fragment,{children:["\u9664\u975e\u4f60\u660e\u786e\u5141\u8bb8\uff0c\u8bfb\u8005 ",Object(_.jsx)("b",{children:"\u4e0d\u5f97\u8f6c\u8f7d\u6216\u6539\u7f16"})," \u6b64 Writeup \u7684\u5185\u5bb9"]}):"CC-BY-NC"===S?Object(_.jsxs)(_.Fragment,{children:["\u6b64 Writeup \u5c06\u6309\u7167 ",Object(_.jsx)(f.b,{href:"https://creativecommons.org/licenses/by-nc/4.0/",children:"CC BY-NC 4.0"})," ","\u534f\u8bae\u5141\u8bb8\u8bfb\u8005 ",Object(_.jsx)("b",{children:"\u5728\u6ce8\u660e\u51fa\u5904\u7684\u60c5\u51b5\u4e0b\u975e\u5546\u4e1a\u4f7f\u7528"})," \u5176\u4e2d\u7684\u5185\u5bb9"]}):"CC0"===S?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("b",{children:"\u4f60\u5c06\u653e\u5f03\u5bf9\u6b64 Writeup \u7684\u6240\u6709\u6743\u5229"}),"\uff0c \u6309\u7167 ",Object(_.jsx)(f.b,{href:"https://creativecommons.org/publicdomain/zero/1.0/",children:"CC0 1.0"})," ","\u534f\u8bae\u5141\u8bb8\u8bfb\u8005\u4efb\u610f\u4f7f\u7528\u5176\u4e2d\u7684\u5185\u5bb9"]}):Object(_.jsxs)(_.Fragment,{children:["(",S,")"]}),children:Object(_.jsxs)(fe.a.Group,{buttonStyle:"solid",value:S,onChange:function(e){return E(e.target.value)},disabled:o,children:[Object(_.jsx)(fe.a.Button,{value:"All-Rights-Reserved",children:"\u4fdd\u7559\u6240\u6709\u6743\u5229"}),Object(_.jsx)(fe.a.Button,{value:"CC-BY-NC",children:"\u5141\u8bb8\u975e\u5546\u4e1a\u4f7f\u7528"}),Object(_.jsx)(fe.a.Button,{value:"CC0",children:"\u5141\u8bb8\u4efb\u610f\u4f7f\u7528"})]})}),Object(_.jsxs)(b.a,{block:!0,type:"primary",size:"large",htmlType:"submit",disabled:o||null===h,children:[Object(_.jsx)(ve.a,{})," \u63d0\u4ea4"]})]})})]})}function _e(){return Object(_.jsxs)("div",{className:"slim-container writeup-container",children:[Object(_.jsx)("h1",{children:"\u63d0\u4ea4 Writeup"}),Object(_.jsx)(ye,{})]})}var Ne=n(285),we=n(163),ke=n(67),Ie=n(305),Ce=n(173),Te=n(306),Se=n(307),Ee=n(308),Fe=n(172),Re=n(309),Ae=n(311);n(260);function Pe(e){var t=e.name,n=e.children;return Object(_.jsx)("div",{className:"template template-".concat(t),dangerouslySetInnerHTML:{__html:n}})}function Le(e){var t=e.name,n=Object(c.useState)(null),r=Object(j.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(null),l=Object(j.a)(i,2),o=l[0],u=l[1],b=Object(c.useCallback)((function(){u(null),a(null),fetch(x.g+t+"?tabid="+g,{method:"GET",credentials:"include"}).then((function(e){return 200!==e.status?(a("HTTP \u9519\u8bef ".concat(e.status)),null):e.text()})).then((function(e){u(e)})).catch((function(e){a("\u7f51\u7edc\u9519\u8bef ".concat(e))}))}),[t]);return Object(c.useEffect)((function(){b()}),[b]),s?Object(_.jsx)(w,{message:s,reload:b}):null===o?Object(_.jsx)(q.a,{}):Object(_.jsx)(Pe,{name:t,children:o})}n(261);function We(e){var t=e.announcement,n=e.extra;return Object(_.jsx)("div",{className:"announcement",children:Object(_.jsx)(H.a,{type:"inner",size:"small",bordered:!1,extra:n||null,title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(U.a,{style:{fontSize:"1em",fontWeight:"bold"},color:"blue",children:[Object(_.jsx)(S.a,{})," ",t.title]})," ","\u53d1\u5e03\u4e8e ",Object(_.jsx)(f.d,{ts:t.timestamp_s})]}),children:Object(_.jsx)(Pe,{name:"announcement",children:t.content})})})}function ze(){var e=y("announcements"),t=Object(j.a)(e,3),n=t[0],c=t[1],r=t[2];return n?Object(_.jsx)(w,{message:n.error_msg,reload:r}):null===c?Object(_.jsx)(q.a,{}):Object(_.jsxs)("div",{className:"announcement-list",children:[c.list.map((function(e){return Object(_.jsx)(We,{announcement:e},e.id)})),0===c.list.length&&Object(_.jsx)(ke.a,{image:ke.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u516c\u544a"})]})}var De=n(304),He=n(162),Me=n.n(He);n(263);function Be(){var e=A();return Object(_.jsxs)("div",{className:"token-widget",children:[Object(_.jsxs)(b.a,{onClick:function(){Me()(e.user.token)&&T.b.success({content:"\u5df2\u590d\u5236",key:"TokenWidget",duration:2})},size:"small",children:[Object(_.jsx)(De.a,{})," \u590d\u5236\u4e2a\u4ebaToken"]}),Object(_.jsx)("span",{children:"\u90e8\u5206\u9898\u76ee\u9700\u8981\u8f93\u5165\u4e2a\u4eba Token \u6765\u9a8c\u8bc1\u8eab\u4efd\uff0c\u4e0e\u4ed6\u4eba\u5206\u4eab Token \u5c06\u89c6\u4e3a\u4f5c\u5f0a\u3002"})]})}var Ge=n(280);n(264);function Ue(e){var t=e.ch,n=y("get_touched_users/"+t.key),c=Object(j.a)(n,3),r=c[0],s=c[1],a=c[2];return r?Object(_.jsx)(w,{message:r.error_msg,reload:a}):null===s?Object(_.jsx)(q.a,{}):Object(_.jsx)("div",{children:Object(_.jsxs)(B.a,{dataSource:s.list,size:"small",children:[Object(_.jsx)(B.a.Column,{title:"\u7528\u6237",render:function(e,t){return Object(_.jsxs)(_.Fragment,{children:[t.nickname," ",Object(_.jsx)(Y,{children:t.group_disp})]})}},"user"),t.flags.map((function(e,t){return Object(_.jsx)(B.a.Column,{title:e.name||"\u901a\u8fc7\u65f6\u95f4",dataIndex:["flags",t],render:function(e){return e?Object(f.e)(e):""}},t)}))]})})}function qe(e){var t=e.ch,n=e.children,r=Object(c.useState)(!1),s=Object(j.a)(r,2),a=s[0],i=s[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("a",{onClick:function(){return i(!0)},children:n}),Object(_.jsx)(Ge.a,{visible:a,title:"".concat(t.title," \u7684\u901a\u8fc7\u60c5\u51b5"),footer:null,destroyOnClose:!0,onCancel:function(){return i(!1)},width:600,className:"touched-users-modal",children:Object(_.jsx)(Ue,{ch:t})})]})}n(265);function Ve(e){var t=e.action,n=e.ch,c=A();return"webpage"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsxs)("a",{href:t.url.replace(/\{\{token}}/g,c.user.token),target:"_blank",children:["\u8bbf\u95ee",t.name]})]}):"webdocker"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsxs)("a",{href:"https://".concat(t.host,"/docker-manager/start?").concat(c.user.token),target:"_blank",children:["\u8bbf\u95ee",t.name]})," ",Object(_.jsx)(Ne.a,{trigger:"click",content:Object(_.jsxs)("div",{children:[Object(_.jsxs)("p",{children:["\u672c\u9898\u4e3a\u6bcf\u540d\u9009\u624b\u5206\u914d\u4e00\u4e2a\u72ec\u7acb\u7684\u540e\u7aef\u73af\u5883\uff0c\u53c2\u89c1 ",Object(_.jsx)("a",{href:"#/info/faq",children:"FAQ\uff1a\u5173\u4e8e Web \u9898\u76ee\u73af\u5883"})]}),Object(_.jsx)("p",{children:"\u5982\u679c\u9898\u76ee\u51fa\u73b0\u95ee\u9898\u53ef\u4ee5\u624b\u52a8\u5173\u95ed\u73af\u5883\uff0c\u4e0b\u6b21\u8bbf\u95ee\u65f6\u5c06\u542f\u52a8\u65b0\u7684\u73af\u5883"}),Object(_.jsx)(b.a,{block:!0,danger:!0,onClick:function(){window.open("https://".concat(t.host,"/docker-manager/stop?").concat(c.user.token))},children:"\u5173\u95ed\u73af\u5883"})]}),children:Object(_.jsxs)(b.a,{size:"small",style:{marginLeft:".5em"},children:[Object(_.jsx)(Ie.a,{}),"\u73af\u5883\u63a7\u5236"]})})]}):"terminal"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsx)("a",{href:Object(x.h)(t,c.user.token),target:"_blank",children:"\u6253\u5f00\u7f51\u9875\u7ec8\u7aef"})," \u6216\u8005\u901a\u8fc7\u547d\u4ee4"," ",Object(_.jsxs)("code",{children:["nc ",t.host," ",t.port]})," \u8fde\u63a5\u5230",t.name]}):"attachment"===t.type?Object(_.jsxs)(_.Fragment,{children:["\u4f60\u53ef\u4ee5 ",Object(_.jsxs)("a",{href:"".concat(x.a).concat(n.key,"/").concat(t.filename),target:"_blank",children:["\u4e0b\u8f7d",t.name]})]}):void 0}function Ze(e){var t=e.do_reload_list,n=e.ch,r=Object(c.useState)(!1),s=Object(j.a)(r,2),a=s[0],i=s[1];return Object(_.jsx)("div",{children:Object(_.jsx)(we.a.Search,{size:"large",addonBefore:n.flags.length>1?Object(_.jsxs)(G.a,{title:"\u6b64\u9898\u6709 ".concat(n.flags.length," \u4e2a Flag\uff0c\u7cfb\u7edf\u4f1a\u8bc6\u522b\u4f60\u63d0\u4ea4\u7684\u662f\u54ea\u4e00\u4e2a"),children:["\u63d0\u4ea4\u4efb\u610f Flag\uff1a",Object(_.jsx)(Ce.a,{})]}):"\u63d0\u4ea4 Flag\uff1a",placeholder:"flag{...}",enterButton:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Te.a,{})," \u63d0\u4ea4"]}),onSearch:function(e){e&&(T.b.loading({content:"\u6b63\u5728\u63d0\u4ea4\u2026",key:"FlagInput",duration:10}),i(!0),v("submit_flag",{challenge_key:n.key,flag:e}).then((function(e){i(!1),e.error?T.b.error({content:e.error_msg,key:"FlagInput",duration:3}):(T.b.success({content:"\u63d0\u4ea4\u6210\u529f",key:"FlagInput",duration:2}),t())})))},loading:a})})}function Ke(e){var t=e.ch,n=y("challenge/"+t.key),c=Object(j.a)(n,3),r=c[0],s=c[1],a=c[2];return r?Object(_.jsx)(w,{message:r.error_msg,reload:a}):null===s?Object(_.jsx)(q.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Pe,{name:"challenge-desc",children:s.desc}),Object(_.jsx)("br",{}),s.actions.map((function(e,n){return Object(_.jsxs)("p",{className:"challenge-action",children:[Object(_.jsx)(Se.a,{})," ",Object(_.jsx)(Ve,{ch:t,action:e})]},n)}))]})}function Ye(e){var t=e.base,n=e.cur;if(t===n)return null;var c=100*(1-n/t);return Object(_.jsxs)("span",{className:"item-discount",title:"\u57fa\u7840\u5206\u503c\uff1a"+t,children:["(-",c.toFixed(0),"%)"]})}function Je(e){var t=e.ch,n=e.do_reload_list;return Object(_.jsxs)("div",{className:"challenge-body",children:[Object(_.jsx)("h1",{children:t.title}),Object(_.jsxs)("p",{className:"challenge-stat",children:[Object(_.jsxs)(U.a,{color:"default",children:["\u57fa\u7840\u5206\u503c ",t.tot_base_score]}),Object(_.jsx)(U.a,{color:"default",children:Object(_.jsxs)(qe,{ch:t,children:[Object(_.jsx)(Se.a,{})," ","\u5171 ",t.passed_users_count," \u4eba\u901a\u8fc7",t.touched_users_count>t.passed_users_count&&Object(_.jsxs)(_.Fragment,{children:["\uff08",t.touched_users_count," \u4eba\u90e8\u5206\u901a\u8fc7\uff09"]})]})}),!!t.metadata.author&&Object(_.jsxs)(U.a,{color:"default",children:["\u547d\u9898\u4eba\uff1a",t.metadata.author]}),!!t.metadata.first_blood_award_eligible&&Object(_.jsx)(U.a,{color:"default",children:Object(_.jsx)("a",{href:"#/board/first_pku",children:Object(_.jsxs)("b",{children:[Object(_.jsx)(V.a,{})," \u89e3\u9898\u5148\u950b\u5956"]})})})]}),Object(_.jsx)("br",{}),Object(_.jsx)(Ke,{ch:t}),"passed"===t.status?Object(_.jsx)(l.a,{type:"success",showIcon:!0,message:"\u4f60\u5df2\u7ecf\u901a\u8fc7\u6b64\u9898"}):Object(_.jsx)(Ze,{do_reload_list:n,ch:t}),Object(_.jsx)("br",{}),Object(_.jsx)(Be,{})]})}function Qe(e){var t=e.info,n=Object(P.g)();return Object(_.jsxs)("div",{className:"portal-user-info",onClick:function(){return n("/board/"+t.active_board_key)},children:[Object(_.jsx)("div",{className:"portal-user-info-status",children:t.status_line}),null!==t.tot_score_by_cat&&Object(_.jsxs)("div",{className:"portal-user-info-cat",children:[Object(_.jsx)(Ee.a,{})," ",t.tot_score_by_cat.map((function(e,t){return Object(_.jsxs)(c.Fragment,{children:[0!==t?" + ":null,e[0]," ",e[1]]},e)}))]})]})}function $e(e){var t=e.list,n=e.active_key,r=Object(P.g)();return Object(_.jsx)("div",{className:"portal-chall-list",children:null===t?Object(_.jsx)(l.a,{showIcon:!0,type:"info",message:"\u73b0\u5728\u4e0d\u5141\u8bb8\u67e5\u770b\u9898\u76ee"}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"portal-chall-row portal-chall-header",children:[Object(_.jsx)("div",{className:"portal-chall-col-title",children:"\u9898\u76ee\u540d\u79f0"}),Object(_.jsx)("div",{className:"portal-chall-col-score",children:"\u5206\u503c"})]}),t.map((function(e){return Object(_.jsxs)(c.Fragment,{children:[Object(_.jsxs)("div",{className:"portal-chall-row".concat(n===e.key?" portal-chall-row-active":""),onClick:function(){return r("/game/"+e.key)},children:[Object(_.jsxs)("div",{className:"portal-chall-col-title",children:[Object(_.jsx)("span",{className:"portal-chall-category-badge",children:Object(_.jsx)(U.a,{color:e.category_color,children:e.category})}),Object(_.jsx)(ee,{status:e.status})," ",e.title,e.flags.length>1&&Object(_.jsx)("span",{className:"portal-chall-caret",children:Object(_.jsx)(Fe.a,{})})]}),Object(_.jsxs)("div",{className:"portal-chall-col-score",children:[e.tot_cur_score,Object(_.jsx)("span",{className:"label-for-score",children:"\u5206"})," ",Object(_.jsx)(Ye,{base:e.tot_base_score,cur:e.tot_cur_score})]})]}),n===e.key&&e.flags.length>1&&e.flags.map((function(e,t){return Object(_.jsxs)("div",{className:"portal-chall-row portal-chall-row-active portal-chall-row-flag",children:[Object(_.jsxs)("div",{className:"portal-chall-col-title",children:[Object(_.jsx)(te,{status:e.status})," ",e.name]}),Object(_.jsxs)("div",{className:"portal-chall-col-score",children:[e.cur_score,Object(_.jsx)("span",{className:"label-for-score",children:"\u5206"})," ",Object(_.jsx)(Ye,{base:e.base_score,cur:e.cur_score})]})]},t)}))]},e.key)})),0===t.length&&Object(_.jsx)(ke.a,{image:ke.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u9898\u76ee"})]})})}function Xe(){var e=y("game"),t=Object(j.a)(e,3),n=t[0],r=t[1],s=t[2],a=Object(P.g)(),i=Object(f.h)(3),l=Object(j.a)(i,3),o=l[0],d=l[1],O=l[2],h=Object(P.h)(),m=void 0===h.challenge?null:h.challenge,x=Object(c.useMemo)((function(){if(null!==r&&null!==r.challenge_list){var e,t=Object(u.a)(r.challenge_list);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.key===m)return n}}catch(c){t.e(c)}finally{t.f()}}return null}),[r,m]);return Object(c.useEffect)((function(){window._anticheat_report&&window._anticheat_report()}),[]),Object(c.useEffect)((function(){n&&("SHOULD_AGREE_TERMS"===n.error&&(T.b.info({content:n.error_msg,key:"Portal.Error",duration:2}),a("/user/terms")),"SHOULD_UPDATE_PROFILE"===n.error&&(T.b.info({content:n.error_msg,key:"Portal.Error",duration:2}),a("/user/profile")))}),[n,a]),n?Object(_.jsx)("div",{className:"slim-container",children:Object(_.jsx)(w,{message:n.error_msg,reload:function(){d(),s()}})}):Object(_.jsxs)("div",{className:"portal-container",children:[Object(_.jsxs)("div",{className:"portal-sidebar",children:[Object(_.jsxs)("div",{className:"portal-headline",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)(Z.a,{})," ",0!==o&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(f.d,{ts:o}),"\u66f4\u65b0"]})]}),Object(_.jsx)("div",{children:Object(_.jsxs)(b.a,{type:"link",ref:O,onClick:function(){T.b.success({content:"\u5df2\u5237\u65b0\u9898\u76ee\u6570\u636e",key:"Portal.ManualLoadData",duration:2}),d(),s()},children:[Object(_.jsx)(K.a,{})," \u5237\u65b0\u9898\u76ee"]})})]}),null===r?Object(_.jsx)(q.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"portal-primary-btn",children:r.show_writeup?Object(_.jsxs)(b.a,{block:!0,size:"large",onClick:function(){return a("/writeup")},type:"primary",children:[Object(_.jsx)(Re.a,{})," \u63d0\u4ea4 Writeup"]}):Object(_.jsxs)(b.a,{block:!0,size:"large",onClick:function(){return a("/info/faq")},children:[Object(_.jsx)(W.a,{})," \u9009\u624b\u5e38\u89c1\u95ee\u9898"]})}),Object(_.jsx)(Qe,{info:r.user_info}),Object(_.jsx)($e,{list:r.challenge_list,active_key:m})]})]}),Object(_.jsxs)("div",{className:"portal-main",children:[Object(_.jsxs)("div",{className:"portal-headline",children:[null!==r&&Object(_.jsxs)("div",{children:[Object(_.jsx)(E.a,{})," ",r.trigger.current_name.replace(/;/,"\uff0c"),!!r.trigger.next_name&&Object(_.jsxs)(_.Fragment,{children:["\uff08",Object(_.jsx)(f.d,{ts:r.trigger.next_timestamp_s,delta:5}),"\uff1a",r.trigger.next_name.replace(/;/,"\uff0c"),"\uff09"]})]}),Object(_.jsx)("div",{children:Object(_.jsxs)(b.a,{type:"link",onClick:function(){window.location.href="#/info/triggers"},children:[Object(_.jsx)(Se.a,{})," \u67e5\u770b\u8d5b\u7a0b\u5b89\u6392"]})})]}),null!==r&&null!==r.last_announcement&&Object(_.jsx)(We,{announcement:r.last_announcement,extra:Object(_.jsxs)("a",{href:"#/info/announcements",children:[Object(_.jsx)(Se.a,{})," \u67e5\u770b\u6240\u6709\u516c\u544a"]})}),null!==x?Object(_.jsx)(Je,{ch:x,do_reload_list:s}):null!==m&&null!==r?Object(_.jsx)(f.c,{}):Object(_.jsx)(Le,{name:"game"})]})]})}function et(){return A().feature.game?Object(_.jsx)(Xe,{}):Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)(Le,{name:"game"}),Object(_.jsx)("br",{}),Object(_.jsx)("div",{className:"landing-login-form",children:Object(_.jsxs)(H.a,{type:"inner",size:"small",bordered:!1,children:[Object(_.jsx)("b",{children:"\u62a5\u540d\u53c2\u8d5b\uff1a"}),Object(_.jsxs)(b.a,{type:"primary",onClick:function(){return window.location.href="#/login"},children:[Object(_.jsx)(Ae.a,{})," \u70b9\u6211\u767b\u5f55"]})]})})]})}var tt=n(282),nt=n(312);n(266);function ct(e){var t=e.status,n=e.children;return Object(_.jsx)("span",{className:"trigger-status-".concat(t),children:n})}function rt(e){var t=e.children.split(";");return Object(_.jsx)("div",{className:"trigger-fragments",children:t.map((function(e,t){return Object(_.jsx)("p",{children:e},t)}))})}function st(){var e=y("triggers"),t=Object(j.a)(e,3),n=t[0],c=t[1],r=t[2];return n?Object(_.jsx)(w,{message:n.error_msg,reload:r}):null===c?Object(_.jsx)(q.a,{}):Object(_.jsxs)("div",{children:[Object(_.jsx)("br",{}),Object(_.jsx)(tt.a,{mode:"left",children:c.list.map((function(e){return Object(_.jsx)(tt.a.Item,{label:Object(_.jsx)(ct,{status:e.status,children:0===e.timestamp_s?"--":Object(f.e)(e.timestamp_s)}),color:{pst:"gray",prs:"blue",ftr:"black"}[e.status],dot:{pst:null,prs:Object(_.jsx)(nt.a,{}),ftr:null}[e.status],children:Object(_.jsx)(ct,{status:e.status,children:Object(_.jsx)(rt,{children:e.name})})},e.timestamp_s)}))}),0===c.list.length&&Object(_.jsx)(ke.a,{image:ke.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u8d5b\u7a0b"})]})}var at=n(90);n(267);function it(){var e=Object(c.useContext)(F),t=e.info,n=e.reload_info,r=Object(c.useState)(!1),s=Object(j.a)(r,2),a=s[0],i=s[1],o=Object(c.useRef)(null),u=Object(P.g)();if(console.log(t),!t.user)return Object(_.jsx)(l.a,{type:"error",showIcon:!0,message:"\u672a\u767b\u5f55",description:"\u8bf7\u767b\u5f55\u540e\u4fee\u6539\u4e2a\u4eba\u8d44\u6599"});var d={colon:!1,initialValues:t.user.profile,labelCol:{span:6},labelWrap:!0,wrapperCol:{span:13},onValuesChange:function(){i(!0)}},O={size:"small",type:"inner",bordered:!1},h={onPressEnter:function(){o.current&&o.current.click()}};return Object(_.jsxs)(me.a.Provider,{onFormFinish:function(e,t){var c=t.forms;if("submit"===e&&a){var r={};Object.values(c).forEach((function(e){Object.assign(r,e.getFieldsValue())})),T.b.loading({content:"\u6b63\u5728\u4fdd\u5b58\u2026",key:"UserProfile",duration:10}),v("update_profile",{profile:r}).then((function(e){e.error?(T.b.error({content:e.error_msg,key:"UserProfile",duration:3}),"SHOULD_AGREE_TERMS"===e.error&&u("/user/terms")):(T.b.success({content:"\u4fdd\u5b58\u6210\u529f",key:"UserProfile",duration:2}),n(),u("/"))}))}},children:[Object(_.jsxs)(H.a,Object(k.a)(Object(k.a)({title:"\u516c\u5f00\u8d44\u6599"},O),{},{children:[Object(_.jsxs)(me.a,Object(k.a)(Object(k.a)({name:"public"},d),{},{children:[void 0!==t.user.profile.nickname&&Object(_.jsx)(me.a.Item,{name:"nickname",label:"\u6635\u79f0",extra:"\u5982\u5305\u542b\u4e0d\u9002\u5b9c\u5185\u5bb9\u53ef\u80fd\u4f1a\u88ab\u5f3a\u5236\u4fee\u6539\u3001\u5c01\u7981\u8d26\u53f7\u6216\u8ffd\u7a76\u8d23\u4efb",children:Object(_.jsx)(we.a,Object(k.a)({maxLength:20,showCount:!0,placeholder:"\uff08\u5c06\u663e\u793a\u5728\u6392\u884c\u699c\u4e0a\uff09"},h))}),Object(_.jsxs)(me.a.Item,{label:"\u7528\u6237\u7ec4",children:[Object(_.jsx)(Y,{children:t.user.group_disp}),Object(_.jsx)(se,{badges:t.user.badges})]})]})),"banned"===t.user.group&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)(l.a,{type:"error",showIcon:!0,message:"\u7531\u4e8e\u8fdd\u53cd\u89c4\u5219\uff0c\u4f60\u7684\u53c2\u8d5b\u8d44\u683c\u5df2\u88ab\u53d6\u6d88\u3002\u5982\u6709\u7591\u95ee\u8bf7\u8054\u7cfb\u5de5\u4f5c\u4eba\u5458\u3002"})]})]})),Object(_.jsx)("br",{}),Object(_.jsxs)(H.a,Object(k.a)(Object(k.a)({title:"\u8054\u7cfb\u65b9\u5f0f"},O),{},{children:[Object(_.jsxs)(me.a,Object(k.a)(Object(k.a)({name:"contact"},d),{},{children:[void 0!==t.user.profile.tel&&Object(_.jsx)(me.a.Item,{name:"tel",label:"\u7535\u8bdd\u53f7\u7801",children:Object(_.jsx)(we.a,Object(k.a)({maxLength:20},h))}),void 0!==t.user.profile.qq&&Object(_.jsx)(me.a.Item,{name:"qq",label:"QQ\u53f7",children:Object(_.jsx)(we.a,Object(k.a)({maxLength:50},h))}),void 0!==t.user.profile.stu_num&&Object(_.jsx)(me.a.Item,{name:"stu_num",label:"\u5b66\u53f7",children:Object(_.jsx)(we.a,Object(k.a)({maxLength:50},h))})]})),"dhu"===t.user.group&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("br",{}),Object(_.jsx)(l.a,{type:"info",showIcon:!0,message:"\u8bf7\u6b63\u786e\u586b\u5199\u4ee5\u4fbf\u8d5b\u540e\u8054\u7cfb\u548c\u9881\u5956\uff0c\u540c\u65f6\u8bf7\u52a0\u5165\u9009\u624b QQ \u7fa4 419148228"})]})]})),Object(_.jsx)("br",{}),Object(_.jsx)(H.a,Object(k.a)(Object(k.a)({title:"\u5176\u4ed6\u4fe1\u606f"},O),{},{children:Object(_.jsx)(me.a,Object(k.a)(Object(k.a)({name:"other"},d),{},{children:void 0!==t.user.profile.comment&&Object(_.jsx)(me.a.Item,{name:"comment",label:"\u4e86\u89e3\u6bd4\u8d5b\u7684\u6e20\u9053",children:Object(_.jsx)(we.a,Object(k.a)({maxLength:100,placeholder:"\uff08\u53ef\u4e0d\u586b\uff09"},h))})}))})),Object(_.jsx)("br",{}),Object(_.jsx)(me.a,{name:"submit",children:Object(_.jsxs)(b.a,{type:"primary",size:"large",block:!0,htmlType:"submit",disabled:!a,ref:o,children:[Object(_.jsx)(at.a,{})," \u4fdd\u5b58"]})})]})}function lt(){return Object(_.jsxs)("div",{className:"slim-container user-profile-container",children:[Object(_.jsx)("h1",{children:"\u4e2a\u4eba\u8d44\u6599"}),Object(_.jsx)(it,{})]})}function ot(){var e=Object(c.useContext)(F),t=e.info,n=e.reload_info,r=Object(P.g)();return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)("h1",{children:"\u53c2\u8d5b\u987b\u77e5"}),Object(_.jsx)(Le,{name:"terms"}),Object(_.jsx)("br",{}),null!==t.user&&(t.user.terms_agreed?Object(_.jsxs)(b.a,{type:"primary",size:"large",block:!0,disabled:!0,children:[Object(_.jsx)(at.a,{})," \u5df2\u540c\u610f\u53c2\u8d5b\u987b\u77e5"]}):Object(_.jsxs)(b.a,{type:"primary",size:"large",block:!0,onClick:function(){T.b.loading({content:"\u6b63\u5728\u4fdd\u5b58\u2026",key:"Terms",duration:10}),window._anticheat_report&&window._anticheat_report(),v("agree_term",{}).then((function(e){e.error?T.b.error({content:e.error_msg,key:"Terms",duration:3}):(T.b.success({content:"\u4fdd\u5b58\u6210\u529f",key:"Terms",duration:2}),n(),r("/"))}))},children:[Object(_.jsx)(at.a,{})," \u6211\u7406\u89e3\u5e76\u540c\u610f\u53c2\u8d5b\u987b\u77e5"]}))]})}var jt=n(313);n(314),n(268);var ut=n(51),bt=n(28),dt=n.n(bt),Ot=n(315),ht=n(316),mt=n(317),xt=n(318),ft=n(171),pt=n(96),gt=n(56),vt=(n(158),function(e){console.log("Received values of form: ",e);var t,n=e;return void 0!==n.verify_code?t="register":void 0===n.verify_code&&(t="login"),new Promise((function(e){fetch(x.b+"normal/"+t,{method:"POST",redentials:"include",headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):"{}"}).then((function(e){return 200!==e.status?{error_msg:"\u51fa\u9519\u62c9"}:e.redirected?window.location.href="/":e.json()})).then((function(t){e(t),T.b.error({content:t.message,key:"Board.ManualLoadData",duration:2})})).catch((function(t){e({error:"error"})}))}))});function yt(e){console.log(e);var t=e.SetIsshow;return Object(_.jsxs)(me.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0,urlfor:"Login"},onFinish:vt,children:[Object(_.jsx)(me.a.Item,{name:"mail",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7\u55b5\uff01"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"},{max:50,message:"\u90ae\u7bb1\u4e0d\u5f97\u8d85\u8fc750\u5b57\u7b26"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(Ot.a,{className:"site-form-item-icon"}),placeholder:"\u90ae\u7bb1"})}),Object(_.jsx)(me.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\u55b5\uff01"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(ht.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(_.jsxs)(me.a.Item,{children:[Object(_.jsx)(b.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"}),"Or ",Object(_.jsx)("a",{onClick:function(){return t(!0)},children:"Register Now!"})]})]})}var _t=function(){var e=Object(ut.a)(dt.a.mark((function e(t){var n;return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={mail:t},e.next=3,new Promise((function(e){fetch(x.b+"normal/send_mail",{method:"POST",redentials:"include",headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):"{}"}).then((function(e){return 200!==e.status?{error_msg:"\u51fa\u9519\u62c9"}:e.json()})).then((function(e){console.log(e),1===e.status?T.b.error({content:e.message,key:"Board.ManualLoadData",duration:2}):0===e.status&&T.b.success({content:e.message,key:"Board.ManualLoadData",duration:2})}))}));case 3:if(200===e.sent.status){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Nt(){var e=me.a.useForm(),t=Object(j.a)(e,1)[0],n=function(e){var t=Object(c.useState)(e),n=Object(j.a)(t,2),r=n[0],s=n[1];return console.log(r),Object(c.useEffect)((function(){setTimeout((function(){r>0&&s(r-1)}),1e3)}),[r]),[r,s]}(0),r=Object(j.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(""),l=Object(j.a)(i,2),o=l[0],u=l[1],d=function(){var e=Object(ut.a)(dt.a.mark((function e(n,c){return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validateFields(["mail"]);case 2:if(e.sent,console.log(c.mail),void 0!=c&&""!=c){e.next=6;break}return e.abrupt("return");case 6:a(n),_t(c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(_.jsxs)(me.a,{form:t,name:"normal_register",className:"login-form",initialValues:{type:"login"},onFinish:vt,onValuesChange:function(e){null!==e.mail&&u(e.mail),console.log(e)},children:[Object(_.jsx)(me.a.Item,{name:"mail",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7\u55b5\uff01"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"},{max:50,message:"\u90ae\u7bb1\u4e0d\u5f97\u8d85\u8fc750\u5b57\u7b26"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(Ot.a,{className:"site-form-item-icon"}),placeholder:"\u90ae\u7bb1"})}),Object(_.jsx)(me.a.Item,{style:{marginBottom:0},children:Object(_.jsxs)(pt.a,{gutter:4,children:[Object(_.jsx)(gt.a,{span:17,children:Object(_.jsx)(me.a.Item,{name:"verify_code",rules:[{required:!0,message:"Please input your phone number!"},{pattern:/^[0-9]{6}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(mt.a,{className:"site-form-item-icon"}),style:{width:"100%"}})})}),Object(_.jsx)(gt.a,{span:7,style:!0,children:Object(_.jsx)(b.a,{placeholder:"\u9a8c\u8bc1\u7801",type:"default",size:"default",onClick:function(){d(60,o)},disabled:0!==s,style:{width:"100%"},children:s>0?"".concat(s,"s"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})})]})}),Object(_.jsx)(me.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\u55b5\uff01"},{pattern:/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,message:"\u5bc6\u7801\u957f\u5ea6\u81f3\u5c118\u4f4d\u5e76\u5305\u62ec\u6570\u5b57\u548c\u5b57\u6bcd\u54e6~"}],children:Object(_.jsx)(we.a.Password,{prefix:Object(_.jsx)(ht.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801",iconRender:function(e){return e?Object(_.jsx)(xt.a,{}):Object(_.jsx)(ft.a,{})}})}),Object(_.jsx)(me.a.Item,{name:"confirm_password",dependencies:["password"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\u55b5\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u6837\u55b5\uff01")):Promise.resolve()}}}],children:Object(_.jsx)(we.a.Password,{prefix:Object(_.jsx)(ht.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u4e8c\u6b21\u5bc6\u7801",iconRender:function(e){return e?Object(_.jsx)(xt.a,{}):Object(_.jsx)(ft.a,{})}})}),Object(_.jsx)(me.a.Item,{children:Object(_.jsx)(b.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Register\uff01"})})]})}function wt(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsx)(l.a,{showIcon:!0,message:Object(_.jsx)("b",{children:"\u6ce8\u610f"}),description:Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("p",{children:"\u8bf7\u4f7f\u7528\u4e1c\u534e\u5927\u5b66\u90ae\u7bb1\uff08\u5b66\u53f7@mail.dhu.edu.cn\uff09\u6ce8\u518c\u5594~\u5982\u679c\u5fd8\u8bb0\u5bc6\u7801\u8bf7\u53ca\u65f6\u8054\u7cfb\u7ba1\u7406\u5458\uff01"})})}),Object(_.jsxs)("div",{className:"login-content",children:[Object(_.jsx)("div",{className:"Form",style:n?{display:"none"}:null,children:Object(_.jsx)(yt,{SetIsshow:function(e){r(e)}})}),Object(_.jsx)("div",{className:"Form",style:n?null:{display:"none"},children:Object(_.jsx)(Nt,{status:!1})})]})]})}var kt=n(319),It=n(320),Ct=n(321),Tt=n(322),St=n(323);n(269);function Et(){var e=A(),t=Object(P.f)(),n=Object(P.g)(),c=t.pathname.startsWith("/user/")?t.pathname:"/"+t.pathname.substring(1).split("/")[0];return console.log("cur_key",c),Object(_.jsx)("div",{className:"header-container",children:Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)("div",{className:"header-logo",children:Object(_.jsxs)("span",{className:"clickable",onClick:function(){return n("/")},children:["/license"===c?Object(_.jsx)("img",{src:"you-sticker.png",alt:"",title:"\u30d2\u30c8\u30ea\u30c0\u30b1\u30ca\u30f3\u30c6\u30a8\u30e9\u30d9\u30a4\u30ca\u30a4\u30e8",className:"game-logo",style:{backgroundColor:"#bdb"}}):x.d,x.e]})}),Object(_.jsx)("div",{className:"header-nav",children:Object(_.jsxs)(L.a,{mode:"horizontal",theme:"dark",selectedKeys:[c],onSelect:function(e){"_"!==e.key.charAt(0)&&n(e.key)},children:[!!e.feature.game&&Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(kt.a,{})," \u6bd4\u8d5b\u4e3b\u9875"]},"/game"),Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(It.a,{})," \u6392\u884c\u699c"]},"/board"),Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(S.a,{})," \u4fe1\u606f"]},"/info"),e.user?Object(_.jsxs)(L.a.SubMenu,{popupOffset:[-6,2],title:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{children:Object(_.jsx)(Ot.a,{})})," ",Object(_.jsx)(f.a,{text:e.user.profile.nickname||"\u8d26\u6237",width:110}),Object(_.jsx)("span",{className:"header-nav-caret",children:Object(_.jsx)(Fe.a,{})})]}),popupClassName:"header-nav-popup",children:[Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(Ct.a,{})," \u4e2a\u4eba\u8d44\u6599"]},"/user/profile"),Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(Z.a,{})," \u63d0\u4ea4\u5386\u53f2\u8bb0\u5f55"]},"/user/submissions"),Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(Tt.a,{})," \u53c2\u8d5b\u987b\u77e5"]},"/user/terms"),Object(_.jsxs)(L.a.Item,{danger:!0,onClick:function(){return Object(f.g)("logout")},children:[Object(_.jsx)(St.a,{})," \u6ce8\u9500"]},"_/user/logout")]},"_/user"):Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(Ae.a,{})," \u767b\u5f55"]},"/login")]})})]})})}n(270);function Ft(){return Object(_.jsx)("div",{className:"footer",children:Object(_.jsxs)("p",{children:["Project ",Object(_.jsx)("b",{children:"Guiding Star"})," by PKUGGG Team",Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BUILD_INFO?" ("+Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BUILD_INFO+")":null,Object(_.jsx)("br",{}),Object(_.jsxs)("a",{href:"#/license",children:[Object(_.jsx)(jt.a,{})," \u5f00\u653e\u6e90\u4ee3\u7801"]})]})})}var Rt=n(17),At=n(16),Pt=n(95),Lt=function(e){console.log("Received values of form: ",e);var t,n=e;return void 0!==n.verify_code?t="register":void 0===n.verify_code&&(t="login"),new Promise((function(e){fetch(x.b+"normal/"+t,{method:"POST",redentials:"include",headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):"{}"}).then((function(e){return 200!==e.status?{error_msg:"\u51fa\u9519\u62c9"}:e.redirected?window.location.href="/":e.json()})).then((function(t){e(t)})).catch((function(t){e({error:"error"})}))}))};function Wt(){return(Wt=Object(ut.a)(dt.a.mark((function e(t){var n;return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendmail:",t),n={mail:t},e.next=4,new Promise((function(e){fetch(x.b+"normal/send_mail",{method:"POST",redentials:"include",headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):"{}"})}));case 4:if(200===e.sent.status){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zt=function(e){Object(Rt.a)(n,e);var t=Object(At.a)(n);function n(){var e;Object(I.a)(this,n);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toRegister=function(t){e.props.onValue(t)},e}return Object(C.a)(n,[{key:"render",value:function(){var e=this;return Object(_.jsxs)(me.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0,urlfor:"Login"},onFinish:Lt,children:[Object(_.jsx)(me.a.Item,{name:"mail",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7\u55b5\uff01"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"},{max:50,message:"\u90ae\u7bb1\u4e0d\u5f97\u8d85\u8fc750\u5b57\u7b26"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(Ot.a,{className:"site-form-item-icon"}),placeholder:"\u90ae\u7bb1"})}),Object(_.jsx)(me.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\u55b5\uff01"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(ht.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(_.jsxs)(me.a.Item,{children:[Object(_.jsx)(me.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(_.jsx)(Pt.a,{children:"\u8bb0\u4f4f\u5bc6\u7801"})}),Object(_.jsx)("a",{className:"login-form-forgot",href:"/",children:"\u5fd8\u8bb0\u5bc6\u7801\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5594"})]}),Object(_.jsxs)(me.a.Item,{children:[Object(_.jsx)(b.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"}),"Or ",Object(_.jsx)("a",{onClick:function(){return e.toRegister("aaa")},children:"Regist Now!"})]})]})}}]),n}(r.a.Component),Dt=function(e){Object(Rt.a)(n,e);var t=Object(At.a)(n);function n(){var e;Object(I.a)(this,n);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={seconds:0,mail:""},e.onValuesChange=function(t){null!==t.mail&&e.setstate((function(e){return{mail:t.mail}}))},e.useCountDown=function(t){setTimeout((function(){t>0&&(t-=1,e.setState((function(e){return{seconds:t}})),console.log(e.state.seconds))}),1e3)},e}return Object(C.a)(n,[{key:"render",value:function(){var e=this;return Object(_.jsxs)(me.a,{name:"normal_register",className:"login-form",initialValues:{type:"login"},onFinish:Lt,onValuesChange:this.onValuesChange,children:[Object(_.jsx)(me.a.Item,{name:"mail",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7\u55b5\uff01"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"},{max:50,message:"\u90ae\u7bb1\u4e0d\u5f97\u8d85\u8fc750\u5b57\u7b26"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(Ot.a,{className:"site-form-item-icon"}),placeholder:"\u90ae\u7bb1"})}),Object(_.jsx)(me.a.Item,{style:{marginBottom:0},children:Object(_.jsxs)(pt.a,{gutter:4,children:[Object(_.jsx)(gt.a,{span:17,children:Object(_.jsx)(me.a.Item,{name:"verify_code",rules:[{required:!0,message:"Please input your phone number!"},{pattern:/^[0-9]{6}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801"}],children:Object(_.jsx)(we.a,{prefix:Object(_.jsx)(mt.a,{className:"site-form-item-icon"}),style:{width:"100%"}})})}),Object(_.jsx)(gt.a,{span:7,style:!0,children:Object(_.jsx)(b.a,{placeholder:"\u9a8c\u8bc1\u7801",type:"default",size:"default",onClick:function(){e.useCountDown(4),function(e){Wt.apply(this,arguments)}(e.state.mail)},disabled:0!==this.state.seconds,style:{width:"100%"},children:this.state.seconds>0?"".concat(this.state.seconds,"s"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})})]})}),Object(_.jsx)(me.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\u55b5\uff01"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,message:"\u5bc6\u7801\u81f3\u5c11\u5305\u62ec\u6570\u5b57\u548c\u5b57\u6bcd\u54e6~"}],children:Object(_.jsx)(we.a.Password,{prefix:Object(_.jsx)(ht.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801",iconRender:function(e){return e?Object(_.jsx)(xt.a,{}):Object(_.jsx)(ft.a,{})}})}),Object(_.jsx)(me.a.Item,{children:Object(_.jsx)(b.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Register\uff01"})})]})}}]),n}(r.a.Component);r.a.Component,n(271);function Ht(){var e=Object(P.h)().page,t=Object(P.g)(),n=A();return Object(_.jsxs)("div",{className:"slim-container",children:[Object(_.jsxs)(L.a,{className:"router-menu",selectedKeys:[e],onSelect:function(e){t("/info/".concat(e.key))},mode:"horizontal",children:[Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(S.a,{})," \u6bd4\u8d5b\u516c\u544a"]},"announcements"),Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(E.a,{})," \u8d5b\u7a0b\u5b89\u6392"]},"triggers"),n.feature.templates.map((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(W.a,{})," ",c]},n)}))]}),Object(_.jsx)("br",{}),"announcements"===e?Object(_.jsx)(ze,{}):"triggers"===e?Object(_.jsx)(st,{}):Object(_.jsx)(Le,{name:e})]})}function Mt(){var e=Object(P.h)().name,t=Object(P.g)();return Object(_.jsxs)("div",{children:[Object(_.jsxs)(L.a,{className:"router-menu",selectedKeys:[e],onSelect:function(e){t("/board/".concat(e.key))},mode:"horizontal",children:[Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(z.a,{})," \u6392\u540d"]},"score_all"),Object(_.jsxs)(L.a.Item,{children:[Object(_.jsx)(D.a,{})," \u4e00\u8840\u699c"]},"first_all")]}),Object(_.jsx)(de,{name:e},e)]})}function Bt(){var e=A();return Object(c.useEffect)((function(){function t(){fetch("".concat(x.f,"event?name=focus&tabid=").concat(g),{method:"POST",credentials:"include"})}function n(){fetch("".concat(x.f,"event?name=blur&tabid=").concat(g),{method:"POST",credentials:"include"})}if(e.user&&e.user.terms_agreed)return window.addEventListener("focus",t),window.addEventListener("blur",n),function(){window.removeEventListener("focus",t),window.removeEventListener("blur",n)}}),[e.user]),null}function Gt(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(Bt,{}),Object(_.jsx)(Et,{}),Object(_.jsx)("div",{className:"main-container",children:Object(_.jsx)(l.a.ErrorBoundary,{children:Object(_.jsxs)(P.d,{children:[Object(_.jsx)(P.b,{exact:!0,path:"/",element:Object(_.jsx)(P.a,{to:"/game",replace:!0})}),Object(_.jsx)(P.b,{exact:!0,path:"/game",element:Object(_.jsx)(et,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/game/:challenge",element:Object(_.jsx)(et,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/board",element:Object(_.jsx)(P.a,{to:"/board/score_all",replace:!0})}),Object(_.jsx)(P.b,{exact:!0,path:"/board/:name",element:Object(_.jsx)(Mt,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/info",element:Object(_.jsx)(P.a,{to:"/info/announcements",replace:!0})}),Object(_.jsx)(P.b,{exact:!0,path:"/info/:page",element:Object(_.jsx)(Ht,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/user/profile",element:Object(_.jsx)(lt,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/user/submissions",element:Object(_.jsx)(he,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/user/terms",element:Object(_.jsx)(ot,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/login",element:Object(_.jsx)(wt,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/writeup",element:Object(_.jsx)(_e,{})}),Object(_.jsx)(P.b,{exact:!0,path:"/license",element:Object(_.jsx)(M,{})}),Object(_.jsx)(P.b,{path:"*",element:Object(_.jsx)(f.c,{})})]})})}),Object(_.jsx)(Ft,{})]})}var Ut=n(165),qt=(n(272),Object(_.jsx)(i.a,{autoInsertSpaceInButton:!1,locale:Ut.a,children:Object(_.jsx)(o.a,{children:Object(_.jsx)(l.a.ErrorBoundary,{children:Object(_.jsx)(R,{children:Object(_.jsx)(Gt,{})})})})}));a.a.render(qt,document.getElementById("root"))},31:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return o})),n.d(t,"k",(function(){return j})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return O})),n.d(t,"j",(function(){return h}));var c=n(22),r=n(1),s=document.title,a=Object(r.jsx)("img",{src:"r00tCTF{W51C0me_t0_R00T!!}.jpg",alt:"",className:"game-logo"}),i="/service/wish/",l="/service/auth/",o="/service/template/",j="/service/ws/",u="/service/anticheat/",b="/service/attachment/";function d(e,t){return"https://".concat(e.host,"/?token=").concat(t)}var O=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:["\u6bd4\u8d5b\u5b8c\u5168\u7ed3\u675f\u540e\uff0c\u8d44\u6599\u5b58\u6863\u5c06 ",Object(r.jsx)(c.b,{href:"https://github.com/r00t-security-lab/rtctf2023",children:"\u516c\u5f00\u5230 GitHub"}),"\u3002 \u672c\u6bd4\u8d5b\u7684\u6240\u6709\u9898\u9762\u91c7\u7528 ",Object(r.jsx)(c.b,{href:"https://creativecommons.org/licenses/by-nc/4.0/",children:"CC BY-NC 4.0"})," \u534f\u8bae\u8bb8\u53ef\uff0c \u6240\u6709\u9898\u76ee\u6e90\u7801\u91c7\u7528 ",Object(r.jsx)(c.b,{href:"https://opensource.org/licenses/MIT",children:"MIT"})," \u534f\u8bae\u8bb8\u53ef\uff0c \u547d\u9898\u4eba\u548c\u9009\u624b Writeup \u6309\u7167\u4f5c\u8005\u6307\u5b9a\u7684\u65b9\u5f0f\u8fdb\u884c\u8bb8\u53ef\u3002"]}),Object(r.jsx)("p",{children:"\u8bf7\u6ce8\u610f\u4e0a\u8ff0\u8bb8\u53ef\u4e0d\u5305\u62ec\u6bd4\u8d5b\u76f8\u5173\u7684\u5176\u4ed6\u8d44\u6599\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6bd4\u8d5b\u516c\u544a\u3001\u53c2\u8d5b\u987b\u77e5\u3001\u6bd4\u8d5b\u4ecb\u7ecd\u548c\u5176\u4ed6\u5ba3\u4f20\u8d44\u6599\uff09\u3002\u8fd9\u4e9b\u8d44\u6599\u4e0d\u5141\u8bb8\u672a\u6388\u6743\u4f7f\u7528\u3002"})]}),h=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"\u8bf7\u5728 Writeup \u4e2d\u63cf\u8ff0\u81ea\u5df1\u662f\u5982\u4f55\u89e3\u51fa\u6bcf\u9053\u9898\u76ee\u7684\uff0c\u5176\u6700\u4f4e\u8981\u6c42\u662f\u8ba9\u547d\u9898\u4eba\u76f8\u4fe1\u4f60\u786e\u5b9e\u5728\u6bd4\u8d5b\u671f\u95f4\u72ec\u7acb\u5b8c\u6210\u4e86\u9898\u76ee\u3002 \u5efa\u8bae\u4f7f\u7528 Markdown \u683c\u5f0f\uff0c\u4f46\u6211\u4eec\u4e5f\u63a5\u53d7 .pdf \u6216 .pptx \u683c\u5f0f\u3002"}),Object(r.jsx)("p",{children:"\u5982\u679c\u6709\u9644\u52a0\u6587\u4ef6\uff08\u5982\u89e3\u9898\u4f7f\u7528\u7684\u811a\u672c\uff09\uff0c\u8bf7\u5c06 Writeup \u548c\u6240\u6709\u9644\u52a0\u6587\u4ef6\u6253\u5305\u6210 .7z \u6216 .zip \u683c\u5f0f\u3002 \u6211\u4eec\u4f1a\u5c06\u90e8\u5206\u4f18\u79c0\u9009\u624b Writeup \u516c\u5f00\u5230 GitHub\uff0c\u56e0\u6b64\u8bf7\u6ce8\u610f\u63a7\u5236\u6587\u4ef6\u5927\u5c0f\uff0c\u907f\u514d\u5c06\u9898\u76ee\u9644\u4ef6\u3001\u7f16\u8bd1\u7ed3\u679c\u3001\u4e34\u65f6\u6587\u4ef6\u3001\u7b2c\u4e09\u65b9\u7a0b\u5e8f\u6253\u5305\u5728\u5185\u3002"}),Object(r.jsx)("p",{children:"\u5728\u63d0\u4ea4\u622a\u6b62\u65f6\u95f4\u524d\u8bf7\u52ff\u516c\u5f00 Writeup \u6216\u4ea4\u6d41\u601d\u8def\u3002\u5982\u679c\u4ed6\u4eba\u7684 Writeup \u4e0e\u4f60\u96f7\u540c\uff0c\u4f60\u4e5f\u4f1a\u53d7\u5230\u5f71\u54cd\u3002"})]})}},[[273,1,2]]]);
//# sourceMappingURL=main.73b2cae1.chunk.js.map